<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Formulaire JSON</title>
   <style>
       body {
           font-family: Arial, sans-serif;
           padding: 20px;
           background: #f5f5f5;
       }

       .field {
           position: relative;
           width: 100%;
           margin-bottom: 20px;
       }

       .field input[type="text"] {
           width: 100%;
           padding: 13px;
           font-size: 0.9rem;
           border: none;
           border-bottom: 1px solid #ccc;
           border-radius: 5px;
           outline: none;
           background: transparent;
           background: linear-gradient(45deg, rgba(170, 28, 146, 1) 0%, rgba(77, 51, 149, 1) 100%);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           text-fill-color: transparent;
       }

       .field label {
           position: absolute;
           left: 10px;
           top: 10px;
           pointer-events: none;
           transition: 0.2s ease;
           font-size: 0.9rem;
           padding: 0 4px;
       }

       .field input:focus + label,
       .field input:not(:placeholder-shown) + label,
       .field input:hover + label {
           top: -8px;
           font-size: 0.9rem;
           background: linear-gradient(45deg, rgba(170, 28, 146, 1) 0%, rgba(77, 51, 149, 1) 100%);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           text-fill-color: transparent;
       }

       /* Styles switch */
       .switch {
           position: relative;
           display: inline-block;
           width: 60px;
           height: 34px;
       }

       .switch input {
           display: none;
       }

       .slider {
           position: absolute;
           cursor: pointer;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background-color: #ccc;
           transition: .4s;
           border-radius: 34px;
       }

       .slider:before {
           position: absolute;
           content: "";
           height: 26px;
           width: 26px;
           left: 4px;
           bottom: 4px;
           background-color: white;
           transition: .4s;
           border-radius: 50%;
       }

       input:checked + .slider {
           background-color: #2196F3;
       }

       input:checked + .slider:before {
           transform: translateX(26px);
       }

       button {
           padding: 10px 20px;
           font-size: 0.9rem;
           border: none;
           border-radius: 5px;
           background: linear-gradient(45deg, rgba(170, 28, 146, 1) 0%, rgba(77, 51, 149, 1) 100%);
           color: white;
           cursor: pointer;
       }

       pre {
           margin-top: 20px;
           background: #fff;
           padding: 15px;
           border-radius: 5px;
       }
   </style>
</head>
<body>

<div class="modal">

   <div class="field">
       <input type="text" id="name" placeholder=" " />
       <label for="name">Nom</label>
   </div>

   <div class="field">
       <span>Switchable</span>
       <label class="switch">
           <input type="checkbox" id="switchable" checked>
           <span class="slider"></span>
       </label>
   </div>

   <div class="field" id="defaultField">
       <span>Valeur par défaut</span>
       <label class="switch">
           <input type="checkbox" id="default">
           <span class="slider"></span>
       </label>
   </div>

   <div class="field">
       <input type="text" id="hotkey" placeholder=" " readonly />
       <label for="hotkey">Combinaison de touches</label>
   </div>

   <button id="generate">Générer JSON</button>

   <pre id="output"></pre>

</div>

<script>
   const hotkeyInput = document.getElementById('hotkey');
   const switchableCheckbox = document.getElementById('switchable');
   const defaultField = document.getElementById('defaultField');

   // Afficher ou cacher la valeur par défaut
   function updateDefaultVisibility() {
       defaultField.style.display = switchableCheckbox.checked ? 'flex' : 'none';
       defaultField.style.alignItems = 'center';
       defaultField.style.gap = '10px';
   }
   switchableCheckbox.addEventListener('change', updateDefaultVisibility);
   updateDefaultVisibility();

   // Capture des touches pour hotkey
   hotkeyInput.addEventListener('keydown', (e) => {
       e.preventDefault();
       let keys = [];
       if (e.ctrlKey) keys.push('Ctrl');
       if (e.shiftKey) keys.push('Shift');
       if (e.altKey) keys.push('Alt');
       if (e.metaKey) keys.push('Meta');
       if (!['Control','Shift','Alt','Meta'].includes(e.key)) keys.push(e.key.toLowerCase());
       hotkeyInput.value = keys.join('+');
   });

   // Génération JSON
   document.getElementById('generate').addEventListener('click', () => {
       const name = document.getElementById('name').value;
       const touch = hotkeyInput.value;
       const switchable = switchableCheckbox.checked;
       const defaultVal = switchable ? document.getElementById('default').checked : false;

       const json = {
           name: name,
           touch: touch,
           switchable: switchable,
           default: defaultVal
       };

       document.getElementById('output').textContent = JSON.stringify(json, null, 4);
   });
</script>

</body>
</html>
